---
layout: post
title:  퀀트 개발의 이상적인 방향성
date:  2024-09-10 05:30:00 +0000
author: macle

---

이번 블로그는 제가 지금 만들고 있는 퀀트 시스템인 runon의 방향성 입니다.
<br>
직접 개발하고 시스템을 돌려보면서 느낀 내용들도 포함되어 있어서 다른 사람들과 다른 의견일 수 있습니다.

## 퀀트시스템을 만드는 이유
퀀트는 과거 기술적분석을 활용하는 시스템트레이딩에서 사람이 보고 판단할 수 있는 모든데이터를 수학적으로 풀어내는 방향으로 변하고 있습니다. 
당장에는 시장의 비효율을 찾는 속도와 그에 따른 전략을 구성하는 시간이 트레이더가 빠를 수 있어도 점점 퀀트 시스템을 응용하는쪽이 더 빨라질 수 있습니다.

## 투자의 이점
각 국의 신용화폐는 무한이 팽창합니다. 팽창한 금액은 인플레이션을 불러오고, 기업은 같은 수익을 내도 인플레이션으로인해 매출과 수익금액이 상승합니다.
<br>
매출과 수익금액이 상승하면 주식가격은 상승하고 투자자는 시장에서 살아남기만 한다면 시장의 팽창분에 따른 이익을 나눠가질 수 있습니다.
<br>
시장에 상장한 많은 기업은 매출과 수익성이 유지될 수 있는 기반의 초기투자와 시스템이 갖추어진 기업이 많습니다.
### 투자를 하지 않는것에 대한 리스크
화폐가치의 훼손속도보다 은행의 이자율이 항상 높다면 투자하지않고 은행에 예금하는것이 좋을 수 있습니다. 
<br>
하지만 역사적으로 그러하지 못했고, 자산운용을 하지 않는다면 현금에 가치는 점차 낮아졌습니다.
<br>
각 국가의 사례를 보면 높은 인플레이션은 주기적으로 일어나고 낮은 확률이지만 하이퍼 인플레이션도 역사적으로 일어났습니다. 하이퍼 인플레이션이 일어나면 지금 현금의 가치는 0에 수렴하고 자산만 가치를 인정받습니다.
### 생명순환 사이클
사업이 사양되어서 망하는 사업이 있다면 새로 등장해서 점점 팽창하는 사업도 있습니다. 망하는 사업에 투자된 금액을 점점 줄여가고 그 금액이 점차 팽창하는 사업으로 이동시키는 것이 중요합니다.

## 데이터의 중요성
퀀트 시장은 과거에 시스템 트레이딩이라고 불리던 알고리즘 중심의 시장에서 데이터 중심의 시장으로 중요도가 변하고 있습니다.

#### 알고리즘 중심의시장
시계열 가격정보화 거래량을 활용한 기존의 기술적분석

#### 데이터 중심의 시장
아직 시장에 효율화 되지않은 대체(대안) 데이터, 매크로, 기존의 시계열 가격정보를 같이 활용하는 분석

#### 데이터 중심 시장의 예
2024년 최고의 성적을 올린 시타델은 멀티너티브(대체) 데이터를 활용하였습니다. 예를 들어 소매업체 POS(판매 시점 정보 관리) 데이터와 위성 이미지를 사용한 위치 정보, 소셜미디어에 올라온 글 등을 데이터화해 투자대상 기업 실적과 원자재 시세를 전망하는데 활용하는 방법

## 수익률과 수익금. 자산분배가 필요한 이유
투자 금액이 크지 않다면, 내 금액이 시장의 효율화를 촉진시키지는 않을 가능성이 높습니다. 하지만 이론이 유명해지고. 많은 자산을 운용한다면 하나의 종목은 그 자산을 감당할 수없고, 효율화를 촉진시켜 전략의 수명이 줄어들게 만듭니다. 
<br>
각 종목과 전략마다 수용할 수 있는 금액은 정확하게 구하기는 어렵지만 존재합니다.

### 수익률이 낮아도 운용자산이 많으면 고민할 수 있는 수익 수단
내 자산이 1억이고 내전략은 1억까지 운용할 수 있는 전략, 기대수익률이 50%라면 , 전략의 1년 기대 수익금은 5천만원 입니다. 내전략이 5천억을 운용해도 무리가 없는 전략이고 1년 기대수익률이 15%면 1년 기대수익금은 750억입니다.

자산이 충분치 않아도 자산운용사업을 하고 운용보수 2%를 책정한다면, 사업 수익성은 100억이 되고, 인건비, 데이터비용을 제외해서 70억의 이익이 남는다면
회사의 이익성으로인해 700억 이상의 가치를 받는 회사로 평가될 수 있을 것 입니다. 

### 효율화의 속도를 늦추는 조건.
매매 판단에 도움이 되는 데이터가 다른 사람이 쉽게 사용할 수 없는 데이터. 나는 저렴한 비용으로 이용할 수 있는 데이터이지만 다른사람은 데이터 이용료에 큰 비용을 지불해야하고, 그 금액이 투자의 의미를 상실할 때.

## 트레이딩 시장의 특성

#### 효율화
과거에 너무 잘 맞는 과적합 된 전략은 이미 시장에 효율화 되어서 미래에는 통하지 않을 전략일 가능성이 높습니다.
<br>
10000원의 가치를 하는 상품이 5000~15000 원의 가격사이에서 존재한다면 수수료,세금,슬리피지를 제외하고도 수익을 기대할 수 있습니다. 단 이갭이 점점 줄어들어 9999 ~ 10001 이라면 수수료와 술라파지 세금을 제외하면 손실입니다.


#### 벡테스팅에서 봐야하는것.
효율화의 이유로 벡테스팅에서 주요 봐야할건 손익비, MDD(최대손실율), 리스크 관리 위주의 기능이어야 하고, 너무 높은 수익률이 벡테스팅상에서 보인다면 그건 과적합 되어 미래에 통하지 않을 확률이 높습니다
<br>
즉 위험구간을 얼마나 잘 방어했는지, 손익비가 수수료와 슬리피지를 지불하고도 괜찮은 수익성인지, 과거의 과적합이나 이미 효율화된 적략이 아닌지를 고민해야 합니다.
<br>
전 가장 중요한건 위험구간의 방어로 보고 있습니다. 한번의 실패로 자산이 0에 수렴한다면 그전략은 기대수익이 줄여서라도 리스크 관리쪽에 신경을 써야하는 전략이라고 생각합니다.

#### 전략을 만든다는건
지금의 상황에서 아직 시장에 효율화 되어있지않아서 수익을 기대할 수 있는 방향을 수학적 공식으로 풀어낸것.
#### 리스크 관리를 한다는건 
시장은 계속 팽창하기때문에 시장에 계속 참여한다면 수익은 올라야 합니다. 하지만 시장은 크게 주저않는 순간이 오는데 레버리지를 사용햇다면 파산하여 자산이 0이될 수 있습니다. 이를 방어하고 피해서 살아남는 것 입니다.
<br>
즉 손실을 볼때 의 손실을 줄이고 살아남는 것 입니다.

#### 머신러닝
머신러닝을 활용하면 과적합될 확률이 높고, 과거의 전략은 효율화 되어서 통하지 않을 확률이 높다는것을 생각하고 활용할 수 있는 부분만 활용해야 할 것으로 보입니다. 활용할 수 있는 예상범위는 리벨런싱, 리스크 관리등으로 생각됩니다.

#### 고빈도 매매
매매 횟수가 많을 수록 수수료, 세금, 슬리피지로 인해 손익비가 좋지 않은 경우가 많습니다. 고빈도 매매로 갈수록 전략의 수명이 짧아져서, 전략 수정을 위한 개입이 더 자주 일어나기 때문에 고빈도 매매를 먼저 연구하는건 개발비용상 좋지 않습니다. 
<br>
제품의 완성도가 충분히 높아져서 고빈도 매매에서 소모되는 인력의 시간이 최소한이 되었을때 연구하는게 좋습니다.


#### 전략의 수명과 전략저장
전략의 많은 사람이 알게 될 수록, 사용방법이 쉬울 수록, 자산의 규모가 클수록 시장에 효율화 되는속도가 빨라져서 수명이 짧아지는 특징이 있습니다.
<br>
이때문에 노력으로 만들어진 전략이 제품 제공사의 서버에 저장된다면 그러한 제품은 피해야 합니다. 이는 내가 전략을 만들기 위해 들인 시간과 비용을 제품제공사에 나누는 꼴 입니다.

#### 리스크관리
리스크관리는 시스템을 활용하는 최고의 장점중 하나입니다. 전문 트레이더보다 대응 속도는 느릴 수 있지만 감정적이지 않기때문에 리스크관리는 더 잘 합니다. 
<br>
대응 속도는 전략수정이 필요한 경우가 발생하면 시스템보다 트레이더가 아직은 유리합니다. 이미 정해진 대응방향으로만 하고 예상치 못한 경우에는 더 적잘한 대응을 못하는 경우는 존재할 수 있습니다.
<br>
리벨런싱, 햇징, 분할매수 분할매도 등의 리스크 관리가 잘 구현 되어야 합니다.


## 이상적인 시스템, 개발목표
개인적으로는 데이터 기반의 인프라가 잘 갖추어진 플랫폼이 미래에도 살아남을 것으로 예상합니다. 앞단의 데이터 구조 설계와 분석기반이 잘 갖추어져 있어야 하고, 다양한 데이터를 확보 및 분석에서 활용 가능해야 합니다.
<br>
어떠한 데이터가 데이터 구조내에 추가되어도 연관분석이 가능해야 하며, 이러한 방식의 데이터는 빅데이터이기 때문에 관련 구조 설계가 되어야 빠른 분석이 가능할 것으로 생각됩니다.
<br>
전략을 짜는데 들어가는 시간과 노력이 점차 줄어드는것, 더 나아가서는 데이터가 계속 추가되어도 활용해서 분석하고, 알아서 전략을 만드는것을 목표로 합니다.
<br>
시장에 효율화 되지않은 부분을 찾는속도가 점점 빨라지고, 그게 점차 자동화 되는것. 쉽게 효율화 되지 못하는 데이터를 사용하고 그사용비용을 줄이는것 입니다.

## 투자를 하기 전에
투자를 잘하기 위해 가치투자를하고, 퀀트를하고, 직접 트레이딩을하는 과정은 절대 쉽지 않습니다. 가치투자자는 좋은기업을 찾고 분석하는 시간이들어가고, 저같이 퀀트를 하는사람은 하루에 수백~ 수천라인의 코딩을 몇년동안해도 명확한 그 끝이보이지 않습니다.
<br>
직접 트레이딩을 하는사람도 매일 트레이딩에 쓰는 시간과 스트레스가 큰걸로 알고 있습니다. 투자하기전에 노력의 과정이 큰것을, 리스크 관리 없이 단기적으로 큰 금액을 번 방식은 계속되면 0 에 수렴한다는건 꼭 알아야 합니다. 

## 투자가 준비되어 있지 않을 때
준비되지 않으면 수익을 내기 어렵습니다.. 준비가 되어 있지 않으면 아무런 투자도 하지 않고 준비를 하는 것이 가장 좋겠지만, 인플레이션에 대한 공포가 있을때만 아래 방법이 좋을것 같습니다.
<br>
대부분 투자자는 S&P500 의 시장수익률 보다 높은 수익률이 아니고, 이는 전문 펀드매니저도 마찬가지 입니다. 
<br>
전략이 수립되지 않으면 적립식 투자로 S&P500을 적립식으로 모아가는것이 좋을 수 있습니다. 편입, 퇴출이 일어나면서 망하는기업은 퇴출되고 성정하는 기업은 편입됩니다. 
<br>
액티브 펀드의 70%는 S&P500 지수보다 못한 성적을 보였습니다. 2001~ 2016의 장기 성적으로보면 액티브 펀드의 90%는 시장수익률보다 높지 않았습니다.
<br>
(액티브 펀드는 전문 펀드매니저가 운용하는 펀드입니다.)
<br>
그만큼 시장 수익 보다 초과 수익을 얻기는 어렵습니다.
<br>
시스템 없이도 위에 적은 내용들이 실현 가능하다면 투자할 준비가 되었다고 생각하지만, 그렇지 않으면 그 준비를 하는게 좋다고 생각합니다.